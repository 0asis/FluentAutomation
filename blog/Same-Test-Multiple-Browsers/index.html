<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="author" content="Brandon Stirnaman" />
		<title>Fluent Automation // Same Test, Multiple Browsers</title>

		<link href='/site.css' rel='stylesheet' />
		<link href='/pygments.css' rel='stylesheet' />

		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-26845406-1']);
		  _gaq.push(['_setDomainName', 'stirno.com']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
	</head>
	<body>
		<header>
			<a href='/'><h1>FLUENT<span>AUTOMATION</span></h1></a>
			<p class='who'><span class='blue'><a href='//twitter.com/stirno'>@stirno</a></span> // <a href='//github.com/stirno'>github.com/stirno</a></p>
			<p class='tagline'>Simple, fluent DSL for automating web applications.</p>
			<br />
			<nav>
				<a href='/docs' title='Get Started' class='tile double blue video'>
					<!-- <img src='/code-getting-started.gif' /> -->
					<iframe src="http://player.vimeo.com/video/52308617?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1&amp;loop=1" width="260" height="123" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
					<span>GETTING STARTED</span>
				</a>
				<a href='/docs' title='Read the Docs' class='tile red'>
					<div class='icon-docs'></div>
					<span>DOCUMENTATION</span>
				</a>
				<a href='//github.com/stirno/FluentAutomation' title='View on GitHub' class='tile purple left-spacer'>
					<div class='icon-github'></div>
					<span>VIEW ON GITHUB</span>
				</a>
				<div class='tile double orange'>
					<div class="nuget-badge">
					<p>
						<code>
							PM&gt; <a title='FluentAutomation.SeleniumWebDriver on NuGet' href='//nuget.org/packages/FluentAutomation.SeleniumWebDriver'>Install-Package FluentAutomation.SeleniumWebDriver</a><br /><br />
							PM&gt; <a title='FluentAutomation.WatiN on NuGet' href='//nuget.org/packages/FluentAutomation.WatiN'>Install-Package FluentAutomation.WatiN</a><br /><br />
							PM&gt; <a title='FluentAutomation.PhantomJS on NuGet' href='//nuget.org/packages/FluentAutomation.PhantomJS'>Install-Package FluentAutomation.PhantomJS</a>
						</code>
					</p>
					</div>
					<span>AVAILABLE ON NUGET</span>
				</div>
			</nav>		
<!-- 		<div class='clear'></div>
			<h1>FLUENT<span>AUTOMATION</span><span class='lighter'>recorder<span></h1>
			<p class='who'><span class='blue'><a href='//twitter.com/pauljz'>@pauljz</a></span> // <a href='//github.com/pauljz'>github.com/pauljz</a></p> -->
		</header>
		<section class='articles'>
			<article>
	<header title='Same Test, Multiple Browsers'><a href='/blog/Same-Test-Multiple-Browsers'>Same Test, Multiple Browsers</a></header>
	<div class='clear'></div>
	<p>When we added Selenium support a few weeks back, we finally had real support for multiple browsers. Quickly we decided that writing tests multiple times or even having to stub them out with different I.Use() calls just wasn’t a compelling enough experience.</p>

<p>Now… Enter the I.Record() and I.Execute() commands.</p>

<p>Take this simple test for example:</p>
<div class="highlight"><pre><code class="csharp"><span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Drag_Drop_Test</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Use</span><span class="p">(</span><span class="n">BrowserType</span><span class="p">.</span><span class="n">InternetExplorer</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;http://developer.yahoo.com/yui/examples/dragdrop/dd-groups.html&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b3&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b4&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Easily runs against IE (or if I.Use is excluded, the default browser for the provider). But what if you wanted to test it against Chrome?</p>

<p>You could do something like…</p>
<div class="highlight"><pre><code class="csharp"><span class="k">private</span> <span class="k">void</span> <span class="nf">DragDropTestActions</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;http://developer.yahoo.com/yui/examples/dragdrop/dd-groups.html&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b3&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b4&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Drag_Drop_Test</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Use</span><span class="p">(</span><span class="n">BrowserType</span><span class="p">.</span><span class="n">InternetExplorer</span><span class="p">);</span>
    <span class="n">DragDropTestActions</span><span class="p">();</span>
<span class="p">}</span>

<span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Drag_Drop_Test_Chrome</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Use</span><span class="p">(</span><span class="n">BrowserType</span><span class="p">.</span><span class="n">Chrome</span><span class="p">);</span>
    <span class="n">DragDropTestActions</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>
<p>This isn’t necessarily wrong, and in some situations might even be required. But we can do better.</p>
<div class="highlight"><pre><code class="csharp"><span class="na">[TestMethod]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">Drag_Drop_Test</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Record</span><span class="p">();</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;http://developer.yahoo.com/yui/examples/dragdrop/dd-groups.html&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#t1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b1&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b3&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth2&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#b4&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pt1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pt2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Drag</span><span class="p">(</span><span class="s">&quot;#pboth1&quot;</span><span class="p">).</span><span class="n">To</span><span class="p">(</span><span class="s">&quot;#pb2&quot;</span><span class="p">);</span>
    <span class="n">I</span><span class="p">.</span><span class="n">Execute</span><span class="p">(</span><span class="n">BrowserType</span><span class="p">.</span><span class="n">InternetExplorer</span><span class="p">,</span> <span class="n">BrowserType</span><span class="p">.</span><span class="n">Chrome</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>
<p>This last test will run the steps against IE first, and then Chrome. Any failures in either run will fail this test. Currently we do not continue to the next browser if an Exception is thrown or an Assertion/Expect fails. Looking for feedback on this behavior. Using these commands, it becomes incredibly easy to extend the scope of your automated testing to include other major browsers.</p>

<p>There is a trade-off though. The way this works, the actions are stored then executed when I.Execute is called. In general this isn’t an issue but it does mean you can’t count on passing data from one Command to another (something we strongly discourage in any case). A secondary issue is that, with only a single test, your test results are not as granular in scenarios where tools like Microsoft’s Test Manager product are being used.</p>

	
	<nav>
		<div class='right tiles'>
			<a class='author brown' href='//twitter.com/stirno'><img class='gravatar' src='http://www.gravatar.com/avatar/f0911b8dd77a34c0354968639b4545f4' /><span>@stirno</span></a>
			<div>07 October 2011</div>
			<div class='orange' style='margin-right: 0px'>
				<span class='text'>SHARE</span>
			</div>
			<div class='orange' style='padding-left: 0px'>
				<span class='icon-google-plus'></span>
				<span class='icon-twitter'></span>
			</div>
		</div>
	</nav>
	<div class='clear' style='padding-top: 20px'></div>
	
	<div id="disqus_thread"></div>
	<script type="text/javascript">
	var disqus_shortname = 'fluent';
	var disqus_identifier = '/blog/Same-Test-Multiple-Browsers';

	(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
		</section>

		<script type="text/javascript">
			// Disqus
			var disqus_shortname = 'fluent';
			(function () {
				var s = document.createElement('script'); s.async = true;
				s.type = 'text/javascript';
				s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
				(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
			}());
		</script>
	</body>
</html>
